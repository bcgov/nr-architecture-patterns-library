{"id":"115081594","type":"page","status":"current","title":"Source Code Repositories","body":{"storage":{"value":"<ac:structured-macro ac:name=\"details\" ac:schema-version=\"1\" ac:macro-id=\"5f5c56f3-5d6c-46cf-ad8f-f3ff3d2ece6b\"><ac:parameter ac:name=\"label\" /><ac:rich-text-body><table class=\"wrapped\"><colgroup><col /><col /></colgroup><tbody><tr><th>Status</th><td><div class=\"content-wrapper\"><p><ac:structured-macro ac:name=\"status\" ac:schema-version=\"1\" ac:macro-id=\"c9a6a79c-d27f-4524-98f0-9de97d0d848e\"><ac:parameter ac:name=\"colour\">Green</ac:parameter><ac:parameter ac:name=\"title\">Published</ac:parameter></ac:structured-macro></p></div></td></tr><tr><th>Overview</th><td><div class=\"content-wrapper\"><p>This page is general awareness, guidance, and recommendations for source code repositories within the NRM</p></div></td></tr></tbody></table></ac:rich-text-body></ac:structured-macro><h1 style=\"text-align: left;\"><ac:structured-macro ac:name=\"toc\" ac:schema-version=\"1\" ac:macro-id=\"b76d844f-a7f5-4c8a-8932-fecc87c416ad\" /></h1><h1 style=\"text-align: left;\">Repository Type Overview</h1><table class=\"wrapped\"><colgroup class=\"\"><col class=\"\" /><col class=\"\" /><col /></colgroup><tbody class=\"\"><tr class=\"\"><th style=\"text-align: left;\"><p>Repository Type</p></th><th style=\"text-align: left;\"><p>When to Use</p></th><th style=\"text-align: left;\"><p>Notes</p></th></tr><tr class=\"\"><td style=\"text-align: left;\">Subversion</td><td style=\"text-align: left;\">Never</td><td style=\"text-align: left;\">Subversion is deprecated, do not create any new repositories.</td></tr><tr class=\"\"><td style=\"text-align: left;\">BitBucket</td><td style=\"text-align: left;\">Closed, internal</td><td style=\"text-align: left;\">Manual, complex, (currently) in-house.  Works with RFC/RFD process and JIRA.  Very customizable.</td></tr><tr class=\"\"><td style=\"text-align: left;\">Github</td><td style=\"text-align: left;\">Whenever possible</td><td style=\"text-align: left;\"><p>Ideal for automation, open source.  Industry leader in most significant areas.  Very unconstrained. </p><p>see <a href=\"https://github.com/bcgov/BC-Policy-Framework-For-GitHub\">https://github.com/bcgov/BC-Policy-Framework-For-GitHub</a></p></td></tr></tbody></table><h2 style=\"text-align: left;\"><ac:inline-comment-marker ac:ref=\"5a0cc7cd-f337-4f2f-a89e-61a266e60848\">GitHub</ac:inline-comment-marker>:</h2><p style=\"text-align: left;\">Beginner Guide: <a class=\"\" href=\"https://github.blog/2024-05-27-what-is-git-our-beginners-guide-to-version-control/\">https://github.blog/2024-05-27-what-is-git-our-beginners-guide-to-version-control/</a></p><ul style=\"text-align: left;\"><li><ac:inline-comment-marker ac:ref=\"6098f703-1f1c-4848-ba43-9fa85bb1dfbe\">Predominant <span style=\"color: rgb(23,43,77);\">Source Code Management(</span></ac:inline-comment-marker><ac:inline-comment-marker ac:ref=\"752650ae-d7bd-41ef-9340-212201f6fbca\">SCM)</ac:inline-comment-marker> system used in BC Government</li><li>Free code repositories for open source projects</li><li>Free GitHub Actions for open source projects</li><li>Marketplace provides an incredible amount of<span> </span><a class=\"external-link\" href=\"https://github.com/marketplace\" rel=\"nofollow\">technologies and services</a></li><li><ac:inline-comment-marker ac:ref=\"08fba09a-8dda-42bd-a786-721b50d6e0d0\">Free container registry</ac:inline-comment-marker> (*within GitHub Actions)<ul><li>Images can be consumed by OpenShift/Kubernetes, AWS, Azure, Podman/Docker and more</li></ul></li><li>Biggest code repository system<ul><li>Highest visibility, globally and locally</li><li>Largest developer ecosystem</li><li>Largest reach for talent</li><li>Largest base for tooling and 3rd party app support</li></ul></li><li>Functions as a live resume for developers</li><li><span>System for templating and <a href=\"https://github.com/bcgov/greenfield-template\">starting projects quickly</a></span></li><li><span>Content is easily discovered by public search (e.g. Google)</span></li><li><span>Open source content is readily available, login-free</span></li><li><span>Visibility encourages collaboration and <ac:inline-comment-marker ac:ref=\"28cfe6b2-f658-4cf9-a26f-7335761d513c\">discourages undesirable behavior</ac:inline-comment-marker></span></li><li><span><ac:inline-comment-marker ac:ref=\"4ccd2002-28da-4d86-a987-b7e1585233bc\">Sensible patterns</ac:inline-comment-marker> prevent code from being deployed to production, but not merged</span></li><li><span><ac:inline-comment-marker ac:ref=\"b3921df1-2f84-4521-b6b1-a24e1adf23fc\">Versatility</ac:inline-comment-marker> allows teams to tailor their processes, increasing productivity</span></li></ul><p><span>For practices on using GitHub see: <ac:link><ri:page ri:content-title=\"GitHub Repository Best Practices\" /></ac:link></span></p><p><br /></p><h2><span>BitBucket:</span></h2><ul style=\"list-style-type: square;\"><li>JIRA integration</li><li>Connections are stronger between teams and interal processes, e.g. <a href=\"https://apps.nrs.gov.bc.ca/int/confluence/display/TS/RFC+Process\">RFC/RFD</a>  <ac:inline-comment-marker ac:ref=\"be09513a-ffbd-4ba6-a699-e89516c57535\">RFC/RFD</ac:inline-comment-marker></li><li>Fine-grained control, e.g.:<ul style=\"list-style-type: square;\"><li>Prevent even repo administrators from merging code or side-stepping requirements</li><li>Asphyxiate contractors with red tape until code is abandoned and/or overwritten</li></ul></li><li>Currently on-premise, working Jenkins and minimal firewall/networking changes</li><li>Potential shift to cloud will require similar admin and network changes to GitHub</li></ul><p><br /></p><h2>Subversion (SVN):</h2><ul style=\"list-style-type: square;\"><li>Lessened need to retrain on legacy projects, some are comfortable/familiar</li></ul><h1>Source Code Repository Naming</h1><ul><li>Github: prefix each repository with &quot;nr-&quot;<ul><li>e.g. nr-(app-name), replace the (app-name) with actual application/product name.</li><li>e.g. nr-fom-api</li></ul></li></ul><p><br /></p><h1>Folder Naming</h1><ul><li>&quot;frontend&quot; folder for frontend<ul><li>for multiple frontends use &quot;frontend-*&quot;<ul><li>Example: frontend-admin</li></ul></li></ul></li><li>&quot;backend&quot; folder for backend<ul><li>for multiple backends use &quot;backend-*&quot;<ul><li>Example: backend-doc-gen</li></ul></li></ul></li><li>&quot;migrations&quot; folder for applications using flyway</li><li>&quot;tests&quot; folder for applications with non-component specific tests (eg. Load). Component specific tests (unit, integration, e2e) should be within their specific subfolder (backend, frontend)</li></ul><h1>Diagrams</h1><ul><li>All repositories should have a .diagrams folder in the root of the repo. This folder should have at least:<br /><ul><li>1x application architecture diagram in the source file format .drawio.xml</li><li>1x system integration and data flow diagram in the source file format .drawio.xml</li><li>1x architecture diagram in the file format .png for each .drawio.xml diagram</li></ul></li></ul><h1>Source Code Repository Topics</h1><ul><li><span class=\"ILfuVd\"><span class=\"hgKElc\">Topics are labels that create subject-based connections between GitHub repositories and let you explore projects by type, technology, and more</span></span></li><li><span class=\"ILfuVd\"><span class=\"hgKElc\">putting nrs as a topic in the repos.</span></span></li></ul><h1>Mono Repo vs Multi Repo?</h1><p><span class=\"hs_cos_wrapper hs_cos_wrapper_meta_field hs_cos_wrapper_type_rich_text\">As a general recommendation, it is preferred to use product based monorepos.</span></p><ul><li><span class=\"hs_cos_wrapper hs_cos_wrapper_meta_field hs_cos_wrapper_type_rich_text\">TL;DR - mono initially, multi with growth (e.g. +services, micro-service, APIs)</span></li><li><span class=\"hs_cos_wrapper hs_cos_wrapper_meta_field hs_cos_wrapper_type_rich_text\">In a mono repo approach, all services and codebase are kept in a single repository</span></li><li>Generally speaking, mono repos minimize dependency management</li><li>If you have multiple services sharing the same libraries or common code, you may want to opt for a mono repo architecture</li><li>If you predict that your project will be extremely large or complex, a mono repo approach may become untenable over time</li><li>If you have a large team with multi developers doing commits and triggering builds a mono repo approach may not suit your needs</li><li>If your project is being worked on by multiple teams (e.g. back end &amp; front end teams) you may want to opt for a multi repo architecture</li><li>If a versioning strategy is important to your project and you want to version services independently, a multi repo approach might be a better fit</li><li>If you have more than one team working in multiple repos for your project, developing patterns and best practices within your teams might be important</li><li>Uptime is easier to maintain with a mult-repo approach</li><li>Multi-repo allows for individual parts to be fixed/updated without taking down the service</li><li>Complex projects and supporting architecture (pipelines, APIs, DBs) are easier to manage with multi repo</li><li>Implementation (mono, multi, APIs, auth) matters far more than how the repositories are arranged</li></ul><h1>Source Code Repository License &amp; Ownership</h1>","representation":"storage","_expandable":{"content":"/rest/api/content/115081594"}},"_expandable":{"editor":"","view":"","export_view":"","styled_view":"","anonymous_export_view":""}},"extensions":{"position":30},"_links":{"webui":"/display/AR/Source+Code+Repositories","edit":"/pages/resumedraft.action?draftId=115081594","tinyui":"/x/egHcBg","collection":"/rest/api/content","base":"https://apps.nrs.gov.bc.ca/int/confluence","context":"/int/confluence","self":"https://apps.nrs.gov.bc.ca/int/confluence/rest/api/content/115081594"},"_expandable":{"container":"/rest/api/space/AR","metadata":"","operations":"","children":"/rest/api/content/115081594/child","restrictions":"/rest/api/content/115081594/restriction/byOperation","history":"/rest/api/content/115081594/history","ancestors":"","version":"","descendants":"/rest/api/content/115081594/descendant","space":"/rest/api/space/AR"}}