"use strict";(globalThis.webpackChunknr_architecture_patterns_library=globalThis.webpackChunknr_architecture_patterns_library||[]).push([[4168],{1641(e,n,i){i.r(n),i.d(n,{assets:()=>l,contentTitle:()=>a,default:()=>h,frontMatter:()=>o,metadata:()=>t,toc:()=>c});const t=JSON.parse('{"id":"Coding Patterns & Practices/Coding Patterns & Practices","title":"Coding Patterns & Practices","description":"StatusGreenPublishedOverviewThe purpose of this page is to outline some coding practices when developing an application. Practices used by a team should be documented in the repository.","source":"@site/docs/Coding Patterns & Practices/Coding Patterns & Practices.md","sourceDirName":"Coding Patterns & Practices","slug":"/Coding Patterns & Practices/","permalink":"/nr-architecture-patterns-library/docs/Coding Patterns & Practices/","draft":false,"unlisted":false,"editUrl":"https://github.com/bcgov/nr-architecture-patterns-library/tree/main/patterns/docs/Coding Patterns & Practices/Coding Patterns & Practices.md","tags":[],"version":"current","sidebarPosition":4,"frontMatter":{"sidebar_position":4},"sidebar":"tutorialSidebar","previous":{"title":"GitHub Repository Best Practices","permalink":"/nr-architecture-patterns-library/docs/GitHub Repository Best Practices/"},"next":{"title":"Application Hosting Options","permalink":"/nr-architecture-patterns-library/docs/Application Hosting Options/"}}');var s=i(4848),r=i(8453);const o={sidebar_position:4},a="Languages Supported",l={},c=[];function d(e){const n={a:"a",h1:"h1",header:"header",li:"li",ol:"ol",p:"p",strong:"strong",ul:"ul",...(0,r.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("table",{class:"wrapped relative-table",children:[(0,s.jsx)("colgroup",{}),(0,s.jsxs)("tbody",{children:[(0,s.jsxs)("tr",{children:[(0,s.jsx)("th",{children:"Status"}),(0,s.jsx)("td",{children:(0,s.jsx)("div",{class:"content-wrapper",children:(0,s.jsx)("p",{children:"GreenPublished"})})})]}),(0,s.jsxs)("tr",{children:[(0,s.jsx)("th",{children:"Overview"}),(0,s.jsx)("td",{children:(0,s.jsx)("div",{class:"content-wrapper",children:(0,s.jsx)("p",{children:"The purpose of this page is to outline some coding practices when developing an application. Practices used by a team should be documented in the repository."})})})]})]})]}),"\n",(0,s.jsx)(n.header,{children:(0,s.jsx)(n.h1,{id:"languages-supported",children:"Languages Supported"})}),"\n",(0,s.jsx)(n.p,{children:"Currently, These 4 languages are the supported languages for use within the NRM. (Typescript/JavaScript, Java On Native, Python, R)"}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Note regarding R:"})," R can be a great fit for certain use cases such as statistical analysis, data visualization, data manipulation, and building Shiny apps. R is widely used in academic research and projects that focus on statistical modeling. However, R has limitations when scaling for application development, specifically for use cases when importing additional libraries is required. For application development (outside of shiny) and other use cases we recommend using one of the other support languages. As well Python can generally be a good alternative for those familiar with R."]}),"\n",(0,s.jsx)(n.h1,{id:"native-deployments",children:"Native Deployments"}),"\n",(0,s.jsx)(n.p,{children:"Some Languages are interpreted by their runtime ex:(java on JVM, python, javascript, etc..) whereas some languages are compiled (Golang, Rust)."}),"\n",(0,s.jsxs)(n.p,{children:["Use native(static binary) deployments wherever available. for ex: it is a ",(0,s.jsx)(n.strong,{children:"MUST"})," for teams using Java to deploy using GraalVM native image without the overhead of JVM interpreter."]}),"\n",(0,s.jsx)(n.p,{children:"Focus on the scale-out vs scale-up as deployments are into containers or serverless."}),"\n",(0,s.jsx)(n.h1,{id:"code-design-patterns-and-principles",children:"Code Design Patterns and Principles"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["Apply SOLID and DRY principles. (",(0,s.jsx)(n.a,{href:"https://www.freecodecamp.org/news/solid-principles-explained-in-plain-english/",children:"https://www.freecodecamp.org/news/solid-principles-explained-in-plain-english"}),", ",(0,s.jsx)(n.a,{href:"https://www.baeldung.com/cs/dry-software-design-principle",children:"https://www.baeldung.com/cs/dry-software-design-principle"}),")"]}),"\n",(0,s.jsx)(n.li,{children:"Use Composition over inheritance as much as possible."}),"\n",(0,s.jsx)(n.li,{children:"Use IOC(Inversion of Control) pattern for dependency Injection, following constructor-based injection over setter or field-based injection."}),"\n",(0,s.jsxs)(n.li,{children:["The Service Layer should contain all the business logic of the application, and wrap each atomic transaction in the proper transaction boundary, Use transactions for read-only methods as well for ex: GET endpoints.","\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"(controller/endpoints \u2192 service \u2192 repository/active record \u2192 entity/query/mutation)"}),"\n",(0,s.jsx)(n.li,{children:"The controller should call the service or multiple services inside a transaction boundary to perf"}),"\n",(0,s.jsx)(n.li,{children:"orm the atomic operation."}),"\n",(0,s.jsx)(n.li,{children:"The Service Layer MUST have a transactional context."}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(n.li,{children:"Use Lazy Loading and Cascading in ORM to avoid fetching child entities unnecessarily and also make sure the mutations are cascaded as well."}),"\n",(0,s.jsx)(n.li,{children:"Follow the TDD approach and the unit tests become living documentation of code, Stub external services with some sort of code, ex in java :- wiremock or powermock, split test lifecycles, so that UTs and Integration Tests can run independently."}),"\n",(0,s.jsxs)(n.li,{children:["Follow The Twelve-Factor App standards -",(0,s.jsx)(n.a,{href:"https://12factor.net/",children:"https://12factor.net/"})]}),"\n",(0,s.jsxs)(n.li,{children:["Use testcontainers(",(0,s.jsx)(n.a,{href:"https://www.testcontainers.org/",children:"https://www.testcontainers.org/"}),") or GHA services(",(0,s.jsx)(n.a,{href:"https://docs.github.com/en/actions/using-containerized-services/about-service-containers",children:"https://docs.github.com/en/actions/using-containerized-services/about-service-containers"}),") for integration TESTS which includes, databases, queues, cache etc..."]}),"\n"]}),"\n",(0,s.jsx)(n.h1,{id:"folder-structure-and-naming-conventions",children:"Folder Structure and Naming Conventions"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["Establish and understand your folder structure, if using a template avoid reorganizing (eg. ",(0,s.jsx)(n.a,{href:"https://github.com/bcgov/quickstart-openshift",children:"https://github.com/bcgov/quickstart-openshift"}),")"]}),"\n",(0,s.jsx)(n.li,{children:"Have a common consistent way when creating names. (eg. for your controllers - The naming of controller APIs should be in line with the pattern of tag definition in swagger - Swagger Tag resource-subresource - URN resource/subresource/pathParameter/subresource)"}),"\n"]}),"\n",(0,s.jsx)(n.h1,{id:"secret-and-environment-variable-handling",children:"Secret and Environment Variable Handling"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Exercise the practice of least privilege (eg. Who can and should be able to access secrets)"}),"\n",(0,s.jsx)(n.li,{children:"Do not put sensitive information in the code, use a secret"}),"\n",(0,s.jsx)(n.li,{children:"Use environment variables when they may not be sensitive but change between environments (eg. Dev, Test, Prod)"}),"\n",(0,s.jsx)(n.li,{children:"Do not create secrets manually in Openshift."}),"\n"]}),"\n",(0,s.jsx)(n.h1,{id:"secure-apis",children:"Secure APIs"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"APIs should always be secured. This is generally achieved by using role based access based off their role validated via JWT."}),"\n",(0,s.jsx)(n.li,{children:"The exception to this would be public APIs."}),"\n"]}),"\n",(0,s.jsx)(n.h1,{id:"error-handling",children:"Error Handling"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Gracefully handle errors"}),"\n",(0,s.jsx)(n.li,{children:"Use plain language when reporting an error. (example. If an error requires a user to do an action they should be able to follow the direction from the error)"}),"\n",(0,s.jsx)(n.li,{children:"Avoid generic language (eg. Error, review logs)"}),"\n"]}),"\n",(0,s.jsx)(n.h1,{id:"code-formatters-and-plugins",children:"Code Formatters and Plugins"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Use common plugins and common formatters across team members to avoid flagging code as changed when it was just the format that was changed. (eg. Prettier, SQL Formatter, ESLint)"}),"\n",(0,s.jsx)(n.li,{children:"Share the IDE specific formatter in the GitHub to avoid conflicts"}),"\n"]}),"\n",(0,s.jsx)(n.h1,{id:"infrastructure-as-code",children:"Infrastructure as Code"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Keep in mind what happens when things go wrong, and how we recover. Maintain your infrastructure as code where possible. If it's not possible ensure you have sufficient documentation to stand back up your infrastructure."}),"\n"]}),"\n",(0,s.jsx)(n.h1,{id:"pipeline",children:"Pipeline"}),"\n",(0,s.jsx)(n.p,{children:"Align your CI/CD pipeline with your hosting environment (GitHub Actions for Openshift Silver/Gold, GitHub Actions with ArgoCD for Openshift Emerald, GiHub Actions with Terraform for AWS)"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Understand your DevOps pipeline (eg. What happens when I create a PR, merge a PR, how an image gets built, how code get tested)"}),"\n",(0,s.jsxs)(n.li,{children:["Maintain your pipeline and align if possible to common practice (eg. ",(0,s.jsx)(n.a,{href:"https://github.com/bcgov/quickstart-openshift",children:"https://github.com/bcgov/quickstart-openshift"}),")"]}),"\n"]}),"\n",(0,s.jsxs)(n.p,{children:["The below was created using the ",(0,s.jsx)(n.a,{href:"https://github.com/bcgov/quickstart-openshift",children:"QuickStart OpenShift"})," as a reference. Please refer to the repo for the most up to date information."]}),"\n",(0,s.jsx)(n.p,{children:"trueBranching Strategyfalseautotoptrue10111"}),"\n",(0,s.jsx)(n.h1,{id:"github-prs---commits",children:"GitHub PRs - Commits"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["Follow the Conventional Commits for a better understanding -",(0,s.jsx)(n.a,{href:"https://www.conventionalcommits.org/en/v1.0.0/",children:"https://www.conventionalcommits.org/en/v1.0.0/"})]}),"\n"]}),"\n",(0,s.jsx)(n.h1,{id:"pr-review-and-practices",children:"PR Review and Practices"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["PR titles should follow conventional commit (eg. ",(0,s.jsx)(n.a,{href:"https://www.conventionalcommits.org/en/v1.0.0/",children:"https://www.conventionalcommits.org/en/v1.0.0/"}),")."]}),"\n",(0,s.jsx)(n.li,{children:"Branches should also follow a similar pattern (eg. feat/$featurename)"}),"\n",(0,s.jsx)(n.li,{children:"A single PR should be for a single Feature/bug/hotfix/patch/etc and kept as small as possible and reasonable"}),"\n",(0,s.jsx)(n.li,{children:'Add appropriate labels established by your team. (eg. Adding labels to also indicate the applications being impacted by the PR, for instance, "web" or "API")'}),"\n",(0,s.jsxs)(n.li,{children:['Connect the issue using the button "Connect Issue", if not available install the Chrome Extension',(0,s.jsx)(n.a,{href:"https://chrome.google.com/webstore/detail/zenhub-for-github/ogcgkffhplmphkaahpmffcafajaocjbd",children:"ZenHub for GitHub"}),"or similar (this will help trace a completed task to the code modified)"]}),"\n",(0,s.jsx)(n.li,{children:"If you are the author of the PR avoid resolving the comments, instead reply to them to let the reviewer be aware of your thoughts."}),"\n",(0,s.jsx)(n.li,{children:"If you are a reviewer try to mark the comments as resolved to help the PR author to identify easily what is still missing."}),"\n",(0,s.jsx)(n.li,{children:"Comments and conversations on the PR are good to let everyone be aware of what is happening but a quick call can also save a lot of time."}),"\n",(0,s.jsx)(n.li,{children:"Once a review is raised, a reviewer should do the best effort to try to find a good moment to start. (eg. in the next 3 business hours. It does not mean finishing it in the 3 hours, just try to start providing some feedback. If multiple PRs are open at the same time the delays will be completely acceptable)"}),"\n",(0,s.jsxs)(n.li,{children:["Review according to best practices for the code and application. PRs are about code review (",(0,s.jsx)(n.strong,{children:"not people review"}),")"]}),"\n",(0,s.jsx)(n.li,{children:"Have a merging practice. (eg. Squash the commits before merging to keep the main timeline clean)"}),"\n",(0,s.jsx)(n.li,{children:"Clean up your branches (eg. Delete the branch after the merge is done (after mergingdo not reuse the branch))"}),"\n"]}),"\n",(0,s.jsx)(n.h1,{id:"dependency-management",children:"Dependency Management"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["It is ",(0,s.jsx)(n.strong,{children:"strongly recommended to keep dependencies updated"})," with automated pull requests from tools like ",(0,s.jsx)(n.strong,{children:"Renovate, Snyk or Dependabot"}),"."]}),"\n",(0,s.jsx)(n.li,{children:"This introduces new features, fix bugs, address vulnerabilities or improve performance, affecting the quality, security, and functionality of a project."}),"\n",(0,s.jsx)(n.li,{children:"Regular dependency pull requests help to keep changes small, up to date and, of course, manageable."}),"\n",(0,s.jsx)(n.li,{children:"These pull requests should not be closed without careful consideration. Unmerged updates should be written into an issue with reasoning and details to follow up in future."}),"\n"]}),"\n",(0,s.jsx)(n.h1,{id:"api-framework-evaluation-factors",children:"API framework evaluation factors"}),"\n",(0,s.jsxs)(n.p,{children:["The below outlines a few",(0,s.jsx)(n.strong,{children:"key"}),"considerations which would help in the decision-making of language/framework to use for API development for",(0,s.jsx)(n.strong,{children:"containerized"}),"environments."]}),"\n",(0,s.jsxs)(n.p,{children:["Details around API Design are outlined here(",(0,s.jsx)(n.a,{href:"https://developer.gov.bc.ca/Data-and-APIs/BC-Government-API-Guidelines",children:"https://developer.gov.bc.ca/Data-and-APIs/BC-Government-API-Guidelines"}),"). The below points are on top of the guidelines provided in the link."]}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsx)(n.li,{children:"Developer friendly, community support and libraries."}),"\n",(0,s.jsx)(n.li,{children:"Resource Consumption(memory/CPU) the less the better, supports the move towards green computing."}),"\n",(0,s.jsx)(n.li,{children:"Automated Open API 3 Specification generation, Swagger UI."}),"\n",(0,s.jsx)(n.li,{children:"Automated DB schema management (flyway/Liquibase or something similar)."}),"\n",(0,s.jsx)(n.li,{children:"ORM integration for Database, ACID, Transaction support, Nested Transactions, Advanced Query with pagination, filter, sorting support."}),"\n",(0,s.jsx)(n.li,{children:"Supports TDD(Test Driven Development) out of the box, which supports unit and integration testing."}),"\n",(0,s.jsx)(n.li,{children:"Easiness of testing for pipelines and other automation."}),"\n",(0,s.jsx)(n.li,{children:"Easiness of OAUTH2 integration."}),"\n",(0,s.jsx)(n.li,{children:"Easiness of Circuit breaker integration and Resiliency."}),"\n",(0,s.jsx)(n.li,{children:"API versioning."}),"\n",(0,s.jsx)(n.li,{children:"Support for REST, GraphQL and gRPC"}),"\n",(0,s.jsx)(n.li,{children:"Asynchronous REST Client."}),"\n",(0,s.jsx)(n.li,{children:"API Health checks(for liveness/readiness checks in Kubernetes world) out of the box which includes checking DB Connections and Message Broker connection (If present)."}),"\n",(0,s.jsx)(n.li,{children:"Easiness of writing to log files in different formats."}),"\n",(0,s.jsx)(n.li,{children:"Switching Between Relational Database should be config only."}),"\n",(0,s.jsx)(n.li,{children:"Easy Concurrency."}),"\n",(0,s.jsx)(n.li,{children:"Easiness of Integration with Distributed tracing frameworks."}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(d,{...e})}):d(e)}},8453(e,n,i){i.d(n,{R:()=>o,x:()=>a});var t=i(6540);const s={},r=t.createContext(s);function o(e){const n=t.useContext(r);return t.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:o(e.components),t.createElement(r.Provider,{value:n},e.children)}}}]);